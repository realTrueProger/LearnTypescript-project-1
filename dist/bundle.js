!function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function n(t,e,r){const n=r.value;return{configurable:!0,get(){return n.bind(this)}}}r.r(e);class s{constructor(t,e,r,n,s){this.id=t,this.title=e,this.description=r,this.people=n,this.status=s}}var i;!function(t){t[t.ACTIVE=0]="ACTIVE",t[t.FINISHED=1]="FINISHED"}(i||(i={}));class o{constructor(){this.listeners=[],this.projects=[]}addListener(t){this.listeners.push(t)}static getInstance(){return this.instance||(this.instance=new o),this.instance}addProject({title:t,description:e,people:r}){const n=new s(Math.random().toString(),t,e,r,i.ACTIVE);this.projects.push(n),this.runListeners()}get projectList(){return[...this.projects]}runListeners(){for(const t of this.listeners)t([...this.projectList])}moveProject(t,e){const r=this.projects.find(e=>e.id===t);r&&(r.status=e,this.runListeners())}}const l=o.getInstance();var a=function(t,e,r,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(o=(i<3?s(o):i>3?s(e,r,o):s(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o};class p{constructor(t,e,r){this.templateElement=document.getElementById(t),this.appRootElement=document.getElementById(e),this.templateRoot=this.getTemplateRoot(),this.renderPosition=r,this.renderHtml()}getTemplateRoot(){return document.importNode(this.templateElement.content,!0).firstElementChild}renderHtml(){this.appRootElement.insertAdjacentElement(this.renderPosition,this.templateRoot)}}class d extends p{constructor(t,e){super("single-project",e,"beforeend"),this.id=t.id,this.templateRoot.innerHTML=`Title: ${t.title}\n         Description: ${t.description} People: ${t.people}`,this.templateRoot.addEventListener("dragstart",this.dragStartHandler),this.templateRoot.addEventListener("dragend",this.dragEndHandler)}dragStartHandler(t){t.dataTransfer.setData("text/plain",this.id),t.dataTransfer.effectAllowed="move"}dragEndHandler(t){}}a([n],d.prototype,"dragStartHandler",null),a([n],d.prototype,"dragEndHandler",null);class c extends p{constructor(t){super("project-list","app","beforeend"),this.projectList=[],this.listType=t,this.setSectionId(),l.addListener(t=>{this.projectList=t.filter(t=>t.status===this.listType),this.fillProjectList()}),this.fillHeader(),this.templateRoot.addEventListener("dragover",this.dragOverHandler),this.templateRoot.addEventListener("drop",this.dropHandler),this.templateRoot.addEventListener("dragleave",this.dragLeaveHandler)}setSectionId(){this.templateRoot.id=this.listType===i.ACTIVE?"active-projects":"finished-projects",this.templateRoot.querySelector("ul").id=this.listType===i.ACTIVE?"active-list":"finished-list"}dragOverHandler(t){t.preventDefault();this.templateRoot.querySelector("ul").classList.add("droppable")}dropHandler(t){const e=t.dataTransfer.getData("text/plain");l.moveProject(e,this.listType===i.FINISHED?i.FINISHED:i.ACTIVE)}dragLeaveHandler(t){this.templateRoot.querySelector("ul").classList.remove("droppable")}fillProjectList(){this.templateRoot.querySelector("ul").innerHTML="";for(const t of this.projectList){const e=t.status===i.ACTIVE?"active-list":"finished-list";new d(t,e)}}fillHeader(){const t=this.templateRoot.querySelector("h2"),e=this.listType===i.ACTIVE?"active projects":"finished projects";t.textContent=e.toUpperCase()}}a([n],c.prototype,"dragOverHandler",null),a([n],c.prototype,"dropHandler",null),a([n],c.prototype,"dragLeaveHandler",null);class u extends p{constructor(){super("project-input","app","afterbegin"),this.titleInputElement=this.templateRoot.querySelector("#title"),this.descriptionInputElement=this.templateRoot.querySelector("#description"),this.peopleInputElement=this.templateRoot.querySelector("#people"),this.templateRoot.addEventListener("submit",this.submitHandler)}submitHandler(t){t.preventDefault();const e=this.collectUserInput();this.clearInput(),l.addProject(e)}collectUserInput(){return{title:this.titleInputElement.value,description:this.descriptionInputElement.value,people:+this.peopleInputElement.value}}clearInput(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}}a([n],u.prototype,"submitHandler",null),new u,new c(i.ACTIVE),new c(i.FINISHED)}]);